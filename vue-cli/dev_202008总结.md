#### dev_202008

```
大纲
-- 请求需登录态的接口处理
```



###### 请求需登录态的接口处理

```js
场景：如添加购物车，需在用户登录的状态下才能添加至其账号上
// 思路一
在api接口里判断登录状态，如未登录，则跳转至登录页
缺点： 1、需要在每个需登录态的接口都判断一次，不优雅，api接口文档不纯粹
			2、不利于维护

// 思路二
将请求接口方法放在vuex的actions方法里，请求时调用actions方法
缺点： {...思路一}

// 思路三
将判断是否需要登录态交给后台处理，在axios响应拦截器中判断返回状态跳转登录页
卡点： 如何让其跳转？vm.$router.push('/login')
			如何获取到vm实例？将vm挂载在window上，用window.vm.$router.push('/login')

// 疑问
判断是否需要登录是否全权依赖后端？前端是否有必要存储登录态？
```



##### mock匹配url上送参数问题

```js
场景：当使用get请求上送参数时，mock匹配请求地址会因为地址后拼接了请求参数而报错，这样违背了commonApi.js只专注于提供接口名
// 处理
将Mock.mock()二次封装一下，将传入的url用正则统一匹配一下：new RegExp(url)
```

